<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Settings-User</title>
		<link rel="stylesheet" type="text/css" href="../../css/reset.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/common.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/login.css"/>
		<link rel="stylesheet" type="text/css" href="../../js/lib/alerts/jquery.alerts.css"/>	
		<link rel="stylesheet" type="text/css" href="../../css/user.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/userRoleView.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/userRoleEdit.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/pwdChange.css"/>
	</head>
	<body>
		<div class="box">
		    <!-- left menu -->
			<div class="left fl"></div>
			<div class="right">
				<!-- right header -->
				<header></header>
				<div class="container">
				    <!-- main template -->				    
				</div>
				<!-- right footer -->
				<footer></footer>
			</div>
		</div>
	</body>
	<script src="../../js/lib/jquery-1.10.1.min.js"></script>
	<script src="../../js/lib/jquery.cookie.js"></script>
	<script src="../../js/lib/jquery.blockui.js"></script>
	<script src="../../js/lib/alerts/jquery.alerts.js"></script>
	<script src="../../js/lib/ractive-legacy.js"></script>
	<script src="../../js/lib/jquery.i18n.properties-1.0.9.js"></script>
	<script src="../../js/lib/manager.js"></script>
	<script src="../../js/user.js"></script>
	<script id="main-template" type="text/active">
	<div class="position _clear title">
		<h3>{{i18n_user_title}}</h3>
		<div class="fr">
			<p>
				<i class="icon icon-home"></i>
				<a href="{{root}}/views/settings.html">{{i18n_user_nav1}}</a>
				<font color="#ccc">></font>
				<span>{{i18n_user_title}}</span>
			</p>
		</div>
	</div>
	<div class="content">
		<div class="content-box">
            <div class="toolbar">
                <!--<button type="button" class="btn" on-click="test">测试</button>-->
				<button type="button" class="btn" on-click="addUser">{{i18n_user_add}}</button>
				<button type="button" class="btn" on-click="saveUser">{{i18n_user_save}}</button>
				<button type="button" class="btn" on-click="deleteUser">{{i18n_user_delete}}</button>
            </div>
			<div class="header">
				<table>
			    <tr>
					<th class="title" colspan="5">{{i18n_user_list}}</th>
				</tr>
				<tr>
					<th colspan="5">&nbsp;</th>
				</tr>
			    <tr>
				    <th width="2%"><input type="checkbox" on-click="checkAll" /><font>&nbsp;&nbsp;</font></th>
					<th width="26%">{{i18n_user_line}}</th>
			        <th width="26%">{{i18n_user_name}}</th>
			        <th width="26%">{{i18n_user_pwd}}</th>
			        <th width="20%">{{i18n_user_role}}</th>
			    </tr>
 				{{#each users:index}}
			    <tr class="usertr" lang="{{index}}">
				    <td>				        
				    	<input type="checkbox" checked="{{checked}}" />
				    	{{#if id == '0' || updated == '1'}}
				        <font color="red">*</font>
				        {{else}}
				        <font>&nbsp;</font>
				        {{/if}}
				    </td>
					<td>
                        <label class="field" on-click="toShowColumnEditor">{{lineName}}</label>                    
						<select class="field" style="display:none;" colName="line" on-blur="toHideColumnEditor" value="{{lineId}}">
	 					{{#each lines}}
						<option value="{{id}}">{{lineName}}</option>
					    {{/each}}
		             	</select>
                    </td>
			        <td>
                        <label class="field"  on-click="toShowColumnEditor">{{userName}}</label>
                        <input class="field" style="display:none;" maxlength="10" on-blur="toHideColumnEditor" type="text" value="{{userName}}"/>
                    </td>
			        <td>
                       {{#if id == '0'}}
                       <label class="field" on-click="toShowColumnEditor">
						{{#if password}}
                       	<span>●●●●●●●●●</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					   	{{/if}}
                       </label>
                       {{else}}
					   <label class="field">
                       	<span>●●●●●●●●●</span>
                        <img src="{{root}}/images/eraser.png" lang="{{id}}" on-click="changePwd" style="cursor:pointer"/>  
					   </label>
					   {{/if}}
                       <input class="field" type="password" style="display:none;" maxlength="10" on-blur="toHideColumnEditor" value="{{password}}"/>
                    </td>
			        <td>
                       {{#if id != '0'}}
							<label class="field" ><a class="link" href="javascript:void(0);" lang="{{id}}" on-click="viewUserRole">{{i18n_user_role_view}}</a></label>
							<label class="field" ><a class="link" href="javascript:void(0);" lang="{{id}}" on-click="editUserRole">{{i18n_user_role_edit}}</a></label>
					   {{else}}
                            <label class="field" ></label>        
                       {{/if}}
                    </td>
			    </tr>
				{{/each}}
			</table>
			</div>
			<div class="footer">
				<div class="lf">
					<p class="title">Starter Motors and Generators</p>
					<p>SG/BPS-CN | 2017. 11. 17 | V2.0</p>
				</div>
				<div class="rt">
				   <img src="{{root}}/images/logo2.png" class="fr">
				</div>
			</div>			
		</div>
	</div>
	<!-- 查看DIV -->
	<div class="role_view_popup"></div>
	<!-- 编辑DIV -->
	<div class="role_edit_popup"></div>
	<!-- 修改密码DIV -->
	<div class="pwd_edit_popup"></div>
    </script>
</html>
